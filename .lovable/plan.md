
# ุฎุทุฉ ุฅุถุงูุฉ ููุฒุฉ ุงูุณุญุจ ูุงูุฅููุงุช (Drag & Drop) ูุชุฑุชูุจ ุชุทุจููุงุช ุงูููุจ

---

## ููุฎุต ุงูููุฒุฉ

ุฅุถุงูุฉ ุฅููุงููุฉ ุชุฑุชูุจ ุชุทุจููุงุช ุงูููุจ ูู ุตูุญุฉ `/web-apps` ุนุจุฑ ุงูุณุญุจ ูุงูุฅููุงุช ุฃู ุฃุฒุฑุงุฑ ุงูุฃุณูู (ููุณ ุงูููุท ุงููุณุชุฎุฏู ูู ุชุฑุชูุจ ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ). ุณูุชู ุนุฑุถ ุฃูู 8 ุชุทุจููุงุช ุญุณุจ ุงูุชุฑุชูุจ ุงูุฌุฏูุฏ ูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ.

---

## ุงูุชุบููุฑุงุช ุงููุทููุจุฉ

### 1. ุชุนุฏูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

ุฅุถุงูุฉ ุนููุฏ `sort_order` ูุฌุฏูู `website_applications`:

```sql
ALTER TABLE website_applications 
ADD COLUMN sort_order INTEGER DEFAULT 0;

-- ุชุญุฏูุซ ุงูุชุฑุชูุจ ุงูุญุงูู ุจูุงุกู ุนูู ุงูุชุทุจููุงุช ุงูููุฌูุฏุฉ
WITH ordered AS (
  SELECT id, ROW_NUMBER() OVER (ORDER BY created_at) - 1 as rn
  FROM website_applications
)
UPDATE website_applications 
SET sort_order = ordered.rn
FROM ordered
WHERE website_applications.id = ordered.id;
```

---

### 2. ุชุนุฏูู `src/hooks/useSupabaseData.ts`

ุชุญุฏูุซ `useWebsiteApplications` ููุชุฑุชูุจ ุญุณุจ `sort_order`:

```typescript
// ูุจู
.order('name');

// ุจุนุฏ
.order('sort_order', { ascending: true });
```

---

### 3. ุชุนุฏูู `src/pages/WebApps.tsx`

ุฅุถุงูุฉ ูุธุงุฆู ุงูุชุฑุชูุจ:

| ุงูุนูุตุฑ | ุงูุชุบููุฑ |
|--------|---------|
| **State ุฌุฏูุฏ** | ุฅุถุงูุฉ `sortedApps` ู `isSorting` |
| **ุฃุฒุฑุงุฑ ุงูุชุฑุชูุจ** | ุฅุถุงูุฉ `ArrowUp` ู `ArrowDown` ู `GripVertical` ููู ุตู |
| **ุฏุงูุฉ moveApp** | ุชุจุฏูู ุชุฑุชูุจ ุงูุชุทุจูููู |
| **ุฏุงูุฉ saveSortOrder** | ุญูุธ ุงูุชุฑุชูุจ ุงูุฌุฏูุฏ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช |
| **ูุงุฌูุฉ ุงููุณุชุฎุฏู** | ุนููุฏ ุฌุฏูุฏ ููุชุฑุชูุจ + ุฒุฑ "ุญูุธ ุงูุชุฑุชูุจ" |

**ููููุงุช ูุงุฌูุฉ ุงููุณุชุฎุฏู ุงูุฌุฏูุฏุฉ:**

```
+-------+------------------+------+----------+--------+--------+---------+
| ุชุฑุชูุจ | ุงูุชุทุจูู          | URL  | ุงูุชุตููู  | ุงูุฏูููู| ุงูุญุงูุฉ | ุฅุฌุฑุงุกุงุช |
+-------+------------------+------+----------+--------+--------+---------+
| โฎ โโ | VMware vCenter   | ...  | ุจููุฉ    | ...    | ูุดุท   | โ๏ธ ๐๏ธ   |
| โฎ โโ | Active Directory | ...  | ุฃูุงู    | ...    | ูุดุท   | โ๏ธ ๐๏ธ   |
+-------+------------------+------+----------+--------+--------+---------+
                              [ุญูุธ ุงูุชุฑุชูุจ]
```

---

### 4. ุชุนุฏูู `src/components/dashboard/WebAppsWidget.tsx`

ุงูุชุฃูุฏ ูู ุนุฑุถ ุฃูู 8 ุชุทุจููุงุช ุญุณุจ `sort_order` (ุณูุชู ุชููุงุฆูุงู ูุฃู ุงูู hook ูุฑุชุจ ุญุณุจ sort_order).

---

## ุงูุชูุงุตูู ุงูุชูููุฉ

### ุงููููุงุช ุงููุชุฃุซุฑุฉ:

1. **Migration ุฌุฏูุฏุฉ** - ุฅุถุงูุฉ `sort_order` column
2. **`src/hooks/useSupabaseData.ts`** - ุชุญุฏูุซ ุงูุชุฑุชูุจ
3. **`src/pages/WebApps.tsx`** - ุฅุถุงูุฉ UI ุงูุชุฑุชูุจ ููุธุงุฆูู

### ููุทู ุงูุชุฑุชูุจ:

```typescript
const moveApp = (index: number, direction: 'up' | 'down') => {
  const targetIndex = direction === 'up' ? index - 1 : index + 1;
  if (targetIndex < 0 || targetIndex >= apps.length) return;
  
  const newApps = [...apps];
  [newApps[index], newApps[targetIndex]] = [newApps[targetIndex], newApps[index]];
  
  // ุชุญุฏูุซ sort_order
  newApps.forEach((app, i) => app.sort_order = i);
  setLocalApps(newApps);
  setHasChanges(true);
};

const saveSortOrder = async () => {
  for (const app of localApps) {
    await supabase
      .from('website_applications')
      .update({ sort_order: app.sort_order })
      .eq('id', app.id);
  }
  refetch();
};
```

---

## ุงููุชูุฌุฉ ุงููุชููุนุฉ

- ุงููุฏูุฑ ูุณุชุทูุน ุชุฑุชูุจ ุงูุชุทุจููุงุช ูู ุตูุญุฉ `/web-apps`
- ุฃูู 8 ุชุทุจููุงุช (ุญุณุจ ุงูุชุฑุชูุจ) ุชุธูุฑ ูู ููุญุฉ ุงูุชุญูู
- ุงูุชุฑุชูุจ ูุญููุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ูุงุฌูุฉ ูุณุชุฎุฏู ุณููุฉ ูุน ุฃุฒุฑุงุฑ ุฃุนูู/ุฃุณูู
- ุฏุนู ูุงูู ูู RTL
